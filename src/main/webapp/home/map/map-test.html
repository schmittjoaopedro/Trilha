<!DOCTYPE html>
<html>
  <head>
    <title>Drawing tools</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=drawing"></script>
    <script>

    	var drawingManager,map, overlayobj; 

		function initialize() {
		  var mapOptions = {
		    center: new google.maps.LatLng(-34.397, 150.644),
		    zoom: 8
		  };

		  map = new google.maps.Map(document.getElementById('map-canvas'),
		    mapOptions);

		  drawingManager = new google.maps.drawing.DrawingManager({
		    drawingMode: google.maps.drawing.OverlayType.MARKER,
		    drawingControl: true,
		    drawingControlOptions: {
		      position: google.maps.ControlPosition.TOP_CENTER,
		      drawingModes: [
		        google.maps.drawing.OverlayType.POLYLINE
		      ]
		    }
		  });
		  drawingManager.setMap(map);

		  google.maps.event.addListener(drawingManager, 'overlaycomplete', function(event) {
	  		  overlayobj = event;
			  console.log(overlayobj.overlay.getPath().getArray());
			});

		}

		function overlayClickListener(overlay) {
		    google.maps.event.addListener(overlay, "mouseup", function(event){
		        $('#vertices').val(overlay.getPath().getArray());
		    });
		}

		/*
		var flightPlanCoordinates = [
		    new google.maps.LatLng(-35.76679541749029, 151.4794921875),
		    new google.maps.LatLng(-35.434976650677295, 	152.017822265625),
		    new google.maps.LatLng(-36.06242171510889, 152.0343017578125)
		  ];
		  var flightPath = new google.maps.Polyline({
		    path: flightPlanCoordinates,
		    geodesic: true,
		    strokeColor: '#FF0000',
		    strokeOpacity: 1.0,
		    strokeWeight: 2
		  });

		flightPath.setMap(map)

		overlayobj.overlay.getPath().getArray()
		*/

		google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
    <form method="post" accept-charset="utf-8" id="map_form">
	  <input type="text" name="vertices" value="" id="vertices"  />
	  <input type="button" name="save" value="Save!" id="save"  />
	</form>
  </body>
</html>
